<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pulque Vivo ‚Äî Pulque ¬∑ Tierra ¬∑ Maguey</title>
  <meta name="description" content="Pulque, tierra y maguey: art√≠culos, gu√≠as y proyectos con dise√±o moderno y animado." />
  <style>
    *,*::before,*::after{box-sizing:border-box}
    body{
      margin:0;
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,'Helvetica Neue',Arial,'Apple Color Emoji','Segoe UI Emoji';
      line-height:1.5;
      color:#0f172a;
      background:#f6f8fb;
      transition:background .25s ease,color .25s ease;
    }
    :root{
      --brand:#059669;
      --ink:#0f172a;
      --muted:#475569;
      --card:#ffffff;
      --stroke:#e5e7eb;
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}

    .container{max-width:1180px;margin-inline:auto;padding:0 16px}
    @media (min-width:640px){.container{padding:0 24px}}
    .stack-2{display:grid;gap:.5rem}
    .stack-3{display:grid;gap:.75rem}
    .stack-4{display:grid;gap:1rem}

    /* NAV */
    .nav{
      position:sticky;top:0;z-index:80;
      background:rgba(255,255,255,.96);
      backdrop-filter:saturate(180%) blur(14px);
      border-bottom:1px solid rgba(15,23,42,.06);
    }
    .nav .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:8px 0;
      gap:.75rem;
      flex-wrap:wrap;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:.45rem;
      font-weight:700;
      flex-shrink:0;
    }
    .brand-logo{height:40px;width:auto}
    @media (min-width:768px){.brand-logo{height:52px}}
    .brand-text{
      font-size:.98rem;
      color:#111827;
      letter-spacing:.01em;
    }

    .links{
      display:flex;
      align-items:center;
      gap:.35rem;
      flex-wrap:wrap;
      justify-content:flex-end;
      flex:1;
      min-width:0;
    }

    .chip{
      display:inline-flex;
      align-items:center;
      gap:.35rem;
      padding:.4rem .8rem;
      border:2px solid var(--brand);
      color:var(--brand);
      background:#ffffff;
      border-radius:999px;
      font-weight:600;
      font-size:.75rem;
      cursor:pointer;
      white-space:nowrap;
      transition:all .16s ease;
    }
    .chip .emoji{font-size:.9rem}
    .chip:hover{
      background:var(--brand);
      color:#020817;
      transform:translateY(-1px);
      box-shadow:0 8px 18px rgba(15,23,42,.16);
    }

    .nav-item{position:relative;display:inline-flex;align-items:center}

    .nav-trigger{
      background:#fff;
    }

    .submenu{
      position:absolute;
      top:100%;
      left:0;
      margin-top:4px;
      padding:8px 8px;
      border-radius:16px;
      background:#ffffff;
      box-shadow:0 14px 32px rgba(15,23,42,.22);
      display:none;
      flex-direction:column;
      gap:2px;
      min-width:170px;
      z-index:200;
    }
    .submenu-item,
    .submenu-label{
      display:block;
      padding:6px 9px;
      border-radius:10px;
      font-size:.78rem;
      color:#111827;
      background:transparent;
      border:none;
      text-align:left;
      cursor:pointer;
      white-space:nowrap;
    }
    .submenu-item:hover{
      background:rgba(5,150,105,.08);
      color:#065f46;
    }
    .submenu-label{
      font-weight:700;
      font-size:.7rem;
      color:#6b7280;
      cursor:default;
    }

    .submenu-group{
      position:relative;
      margin-top:4px;
      padding-top:4px;
      border-top:1px solid rgba(148,163,253,.26);
    }
    .submenu-nested{
      position:absolute;
      top:0;
      left:100%;
      margin-left:6px;
      padding:6px;
      border-radius:14px;
      background:#ffffff;
      box-shadow:0 12px 26px rgba(15,23,42,.2);
      display:none;
      flex-direction:column;
      gap:2px;
      min-width:150px;
      z-index:210;
    }
    .submenu-group:hover .submenu-nested{
      display:flex;
    }

    .nav-item.open>.submenu{display:flex;}
    @media (hover:hover){
      .nav-item:hover>.submenu{display:flex;}
    }

    /* HERO */
    .hero{position:relative}
    .hero--compact{padding:44px 0 32px}
    .hero-wrap{display:grid;gap:1.25rem}
    @media (min-width:900px){
      .hero-wrap{grid-template-columns:1.1fr .9fr;align-items:center}
    }
    .hero-title{
      margin:0;
      font-size:clamp(30px,7vw,64px);
      line-height:1.06;
      letter-spacing:-.5px;
      background:linear-gradient(135deg,#059669,#65a30d,#065f46);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .hero-subtitle{
      margin:.35rem 0 0;
      color:#475569;
      max-width:60ch;
      font-size:clamp(15px,3.8vw,18px);
    }
    .hero-chips{
      display:flex;
      flex-wrap:wrap;
      gap:.5rem;
      margin:.8rem 0 0;
    }
    .pill{
      display:inline-flex;
      gap:.5rem;
      align-items:center;
      padding:.45rem .75rem;
      border-radius:14px;
      background:rgba(16,185,129,.12);
      color:#065f46;
      font-weight:700;
      font-size:.78rem;
    }
    .cta-group{
      display:grid;
      gap:.6rem;
      margin-top:.9rem;
    }
    @media (min-width:520px){
      .cta-group{grid-auto-flow:column;justify-content:start}
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:.5rem;
      border:0;
      border-radius:16px;
      padding:.65rem 1rem;
      font-weight:700;
      cursor:pointer;
      transition:transform .12s ease,filter .18s ease,box-shadow .18s ease;
    }
    .btn-brand{
      background:var(--brand);
      color:#fff;
      box-shadow:0 10px 30px rgba(16,185,129,.35);
    }
    .btn-brand:hover{
      filter:brightness(.96);
      transform:translateY(-1px);
    }
    .btn-block{width:100%}
    @media (min-width:520px){.btn-block{width:auto}}

    .hero-side{display:none}
    @media (min-width:900px){.hero-side{display:block}}
    .hero-card{padding:20px;position:relative;overflow:hidden}
    .hero-card-bloom{
      position:absolute;inset:auto -80px auto auto;
      width:220px;height:220px;border-radius:999px;
      background:rgba(16,185,129,.18);filter:blur(40px)
    }
    .hero-card-text{color:#475569;margin:0}
    .hero-mini-cards{
      display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.25rem
    }
    .hero-mini-cards .mini{
      padding:.55rem .9rem;border-radius:12px;
      box-shadow:none;background:rgba(255,255,255,.9);
    }

    /* Blobs */
    .backdrop{position:absolute;inset:0;overflow:hidden;z-index:-1}
    .blob{position:absolute;border-radius:999px;filter:blur(40px);opacity:.35;transform:translateZ(0);animation:float 18s ease-in-out infinite}
    .b1{width:580px;height:580px;left:-120px;top:-120px;background:radial-gradient(closest-side,#34d399,transparent)}
    .b2{width:480px;height:480px;right:-120px;top:120px;background:radial-gradient(closest-side,#22d3ee,transparent);animation-delay:2s}
    .b3{width:360px;height:360px;left:40%;bottom:-120px;background:radial-gradient(closest-side,#a3e635,transparent);animation-delay:4s}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-24px)}}

    /* POSTS HOME */
    .posts-grid{display:grid;grid-template-columns:1fr;gap:1rem}
    @media (min-width:640px){.posts-grid{grid-template-columns:repeat(2,1fr)}}
    @media (min-width:980px){.posts-grid{grid-template-columns:repeat(3,1fr)}}
    .card{
      border-radius:24px;
      background:rgba(255,255,255,.9);
      border:1px solid rgba(15,23,42,.06);
      box-shadow:0 20px 50px -12px rgba(0,0,0,.15);
      overflow:hidden;
      transition:transform .14s ease,box-shadow .14s ease,background .2s ease,border-color .2s ease;
    }
    .card:hover{
      transform:translateY(-2px);
      box-shadow:0 24px 60px -18px rgba(15,23,42,.28);
    }
    .post-cover{
      height:144px;
      background:linear-gradient(135deg,rgba(16,185,129,.15),rgba(250,204,21,.15));
      background-size:cover;
      background-position:center;
    }

    /* DONAR */
    .don-grid{display:grid;gap:1rem}
    @media (min-width:760px){.don-grid{grid-template-columns:1.1fr .9fr}}
    .copy-badge{
      display:inline-flex;gap:.5rem;align-items:center;
      padding:.4rem .7rem;border:1px dashed rgba(15,23,42,.25);
      border-radius:12px;font-weight:700;flex-wrap:wrap;
      font-size:.8rem;
    }

    /* BIO / COMUNIDAD extra */
    .bio-card{padding:24px}
    .bio-title{margin:0}
    .bio-text{color:#64748b;margin:.4rem 0 0}

    footer{
      border-top:1px solid rgba(15,23,42,.08);
      padding:24px 0;
      margin-top:40px;
      color:#64748b;
      font-size:.78rem;
    }
    footer .row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:1rem;
      flex-wrap:wrap;
    }

    .reveal{opacity:0;transform:translateY(16px);transition:opacity .5s ease,transform .5s ease}
    .reveal.in{opacity:1;transform:translateY(0)}

    /* ==== THEMES ==== */
    /* Dark */
    body[data-theme="oscuro"]{
      background:#020817;
      color:#e5e7eb;
    }
    body[data-theme="oscuro"] .nav{
      background:rgba(2,8,23,.98);
      border-bottom-color:rgba(148,163,253,.25);
      box-shadow:0 14px 40px rgba(0,0,0,.9);
    }
    body[data-theme="oscuro"] .brand-text{color:#e5e7eb;}
    body[data-theme="oscuro"] .card{
      background:rgba(12,19,38,.98);
      border-color:rgba(148,163,253,.25);
      color:#e5e7eb;
    }
    body[data-theme="oscuro"] .post-cover{
      background:linear-gradient(135deg,#020817,#059669);
    }
    body[data-theme="oscuro"] .chip{
      background:transparent;
      border-color:#22c55e;
      color:#bbf7d0;
    }
    body[data-theme="oscuro"] .chip:hover{
      background:#22c55e;
      color:#020817;
    }
    body[data-theme="oscuro"] footer{
      border-top-color:rgba(148,163,253,.25);
      color:#9ca3af;
    }

    /* Psychedelic */
    body[data-theme="psycho"]{
      background:
        radial-gradient(circle at top,#22c55e1f,#020817),
        radial-gradient(circle at bottom,#a855f71f,transparent),
        #020817;
      color:#e5e7eb;
    }
    body[data-theme="psycho"] .nav{
      background:rgba(6,6,20,.98);
      border-bottom-color:#a855f7;
      box-shadow:0 16px 50px rgba(0,0,0,.9);
    }
    body[data-theme="psycho"] .brand-text{color:#f9fafb;}
    body[data-theme="psycho"] .chip{
      border-color:#22c55e;
      color:#bbf7d0;
      background:rgba(6,8,24,.98);
    }
    body[data-theme="psycho"] .chip:hover{
      background:linear-gradient(90deg,#22c55e,#a855f7,#22d3ee);
      color:#020817;
    }
    body[data-theme="psycho"] .card{
      background:rgba(6,8,24,.98);
      border-color:rgba(168,85,247,.4);
      box-shadow:0 22px 60px rgba(0,0,0,1);
      color:#e5e7eb;
    }
    body[data-theme="psycho"] .post-cover{
      background:linear-gradient(135deg,#22c55e,#a855f7,#22d3ee);
    }

    /* Comunitario (mural) */
    body[data-theme="comunitario"]{
      background:
        radial-gradient(circle at 0 0,rgba(254,252,232,1),transparent),
        radial-gradient(circle at 100% 0,rgba(220,252,231,.95),transparent),
        radial-gradient(circle at 0 100%,rgba(254,249,195,.95),transparent),
        #fefce8;
      color:#1f2937;
    }
    body[data-theme="comunitario"] .nav{
      background:rgba(255,255,255,.98);
      border-bottom-color:rgba(234,179,8,.6);
      box-shadow:0 14px 40px rgba(180,83,9,.18);
    }
    body[data-theme="comunitario"] .brand-text{color:#15803d;}
    body[data-theme="comunitario"] .chip{
      border-color:#22c55e;
      color:#166534;
      background:rgba(255,255,255,.98);
    }
    body[data-theme="comunitario"] .chip:hover{
      background:linear-gradient(90deg,rgba(22,163,74,.18),rgba(249,115,22,.08));
      color:#14532d;
    }
    body[data-theme="comunitario"] .card{
      background:rgba(255,255,255,.98);
      border-color:rgba(22,163,74,.22);
      box-shadow:0 22px 55px rgba(146,64,14,.16);
    }
    body[data-theme="comunitario"] .post-cover{
      background:linear-gradient(135deg,rgba(22,163,74,.4),rgba(245,158,11,.26));
    }
  </style>
</head>
<body>
  <!-- NAV -->
  <div class="nav" id="mainNav">
    <div class="container row">
      <a class="brand" href="index.html">
        <img src="images/logo_transparente.png" alt="Guardianes del Pulque" class="brand-logo">
        <span class="brand-text">Guardianes del Pulque</span>
      </a>

      <div class="links">
        <!-- Comunidad -->
        <div class="nav-item nav-comunidad">
          <button class="chip nav-trigger" type="button">Comunidad ‚ñæ</button>
          <div class="submenu">
            <a class="submenu-item" href="#bioalkimia">Qui√©nes somos</a>
            <a class="submenu-item" href="#aliados">Aliados</a>
            <div class="submenu-group">
              <span class="submenu-label">Patrocinadores ‚ñ∏</span>
              <div class="submenu submenu-nested">
                <a class="submenu-item" href="https://teomatisacredcopal.com/" target="_blank" rel="noopener">Teomati</a>
              </div>
            </div>
          </div>
        </div>

        <!-- Art√≠culos -->
        <a class="chip" href="posts.html">Art√≠culos</a>

        <!-- Donar -->
        <a class="chip" href="#donar"><span class="emoji">üíö</span> Donar</a>

        <!-- Modo -->
        <div class="nav-item nav-mode">
          <button class="chip nav-trigger" id="modeToggle" type="button">Modo ‚ñæ</button>
          <div class="submenu submenu-mode" id="modeMenu">
            <button class="submenu-item" data-theme="default" type="button">Cl√°sico</button>
            <button class="submenu-item" data-theme="oscuro" type="button">Modo oscuro</button>
            <button class="submenu-item" data-theme="psycho" type="button">Modo psychod√©lico</button>
            <button class="submenu-item" data-theme="comunitario" type="button">Modo comunitario</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- HERO -->
  <header class="hero hero--compact container">
    <div class="backdrop" aria-hidden="true">
      <div class="blob b1"></div><div class="blob b2"></div><div class="blob b3"></div>
    </div>

    <div class="hero-wrap">
      <div class="stack-4 reveal">
        <h1 class="hero-title">Pulque ¬∑ Tierra ¬∑ Maguey</h1>
        <p class="hero-subtitle">Historias, gu√≠as y proyectos para cultivar, construir y cuidar el territorio.</p>
        <div class="hero-chips">
          <span class="pill">üç∂ Pulque vivo</span>
          <span class="pill">üèóÔ∏è Tierra que construye</span>
          <span class="pill">üåµ Maguey y paisaje</span>
        </div>
        <div class="cta-group">
          <a class="btn btn-brand btn-block" href="#posts">Explorar art√≠culos ‚Üí</a>
        </div>
        <small style="color:#64748b;display:block;margin-top:.25rem">‚Ä¢ Actualizado cada semana</small>
      </div>

      <div class="hero-side reveal">
        <div class="card hero-card">
          <div class="hero-card-bloom"></div>
          <div class="stack-3">
            <div class="pill">üçÉ <strong>Guardianes del pulque</strong></div>
            <p class="hero-card-text">Microbiota, magueyes, oficios y barro que dialogan con tecnolog√≠as abiertas.</p>
            <div class="hero-mini-cards">
              <div class="mini card">Fermentos</div>
              <div class="mini card">Adobe</div>
              <div class="mini card">Humedales</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- POSTS HOME -->
  <section id="posts" class="container" style="margin-bottom:48px">
    <div class="stack-2" style="grid-auto-flow:column;justify-content:space-between;align-items:end;margin-bottom:12px">
      <h2 style="margin:0">Art√≠culos recientes</h2>
      <a class="chip" href="posts.html">Ver todo</a>
    </div>
    <div class="posts-grid" id="postsGrid"></div>
    <div id="status" style="margin-top:8px;font-size:12px;color:#64748b"></div>
  </section>

  <!-- DONAR -->
  <section id="donar" class="container" style="margin-bottom:64px">
    <div class="card reveal" style="padding:24px">
      <div class="stack-3">
        <h3 style="margin:0"><span class="emoji">üíö</span> Donar</h3>
        <p style="color:#64748b;margin:0">
          Tu apoyo mantiene contenidos abiertos sobre pulque, tierra y maguey. Gracias por impulsar este trabajo comunitario.
        </p>

        <div class="don-grid">
          <div class="stack-3">
            <div class="copy-badge">
              <span>CLABE:</span>
              <code id="clabeText">000000000000000000</code>
              <button id="copyClabe" class="btn" type="button">Copiar</button>
            </div>
            <small style="color:#94a3b8">Reemplaza la CLABE por la real en el HTML.</small>

            <div class="stack-2" style="grid-auto-flow:column;gap:.5rem;align-items:center;justify-content:flex-start">
              <a id="paypalBtn" class="chip" href="#" target="_blank" rel="noopener">
                <span class="emoji">üíö</span> Donar por PayPal
              </a>
              <a class="chip" href="mailto:donaciones@tusitio.mx">Otra forma de donar</a>
            </div>
          </div>

          <div class="stack-3">
            <div class="card" style="padding:16px;background:rgba(16,185,129,.08)">
              <strong>Transparencia</strong>
              <p style="color:#64748b;margin:.4rem 0 0">
                Publicaremos un resumen de en qu√© se invierte: servidores, materiales, talleres y trabajo comunitario.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- BIO / COMUNIDAD -->
  <section id="bioalkimia" class="container" style="margin-bottom:64px">
    <div class="card bio-card reveal">
      <h3 class="bio-title">Teomati</h3>
      <p class="bio-text">
        Proyecto hermano donde convergen bioconstrucci√≥n, fermentos y territorio. Visita para conocer m√°s colaboraciones.
      </p>
      <div class="stack-2" style="grid-auto-flow:column;gap:.5rem;align-items:center;justify-content:flex-start;margin-top:.5rem">
        <a class="chip" href="https://teomatisacredcopal.com/" target="_blank" rel="noopener">Ir a Teomati ‚Üí</a>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="container row">
      <div style="display:flex;align-items:center;gap:.4rem">
        <img src="images/logo_transparente.png" alt="Guardianes del Pulque" style="height:22px;width:auto">
        <span>Guardianes del Pulque</span>
      </div>
      <div style="display:flex;gap:.35rem;flex-wrap:wrap">
        <a class="chip" href="posts.html">Art√≠culos</a>
        <a class="chip" href="#donar"><span class="emoji">üíö</span> Donar</a>
        <a class="chip" href="#bioalkimia">Comunidad</a>
      </div>
    </div>
  </footer>

  <!-- Fallback simple para entorno local sin posts.json -->
  <script type="application/json" id="posts-fallback">[
    {
      "tag":"Pulque",
      "title":"De la penca al jarro: el proceso vivo",
      "excerpt":"Fermentos, microbiota y tradici√≥n del maguey.",
      "url":"articulos/de-la-penca-al-jarro/de-la-penca-al-jarro.html",
      "cover":"articulos/de-la-penca-al-jarro/de_la_penca_al_jarro.png"
    }
  ]</script>

  <script>
    // ===== THEME INIT =====
    (function(){
      const saved = localStorage.getItem('gp.theme');
      if(saved && saved !== 'default'){
        document.body.setAttribute('data-theme', saved);
      }
    })();

    // ===== NAV DROPDOWNS (Comunidad + Modo) =====
    (function(){
      const comunidadItem = document.querySelector('.nav-comunidad');
      const modeItem = document.querySelector('.nav-mode');
      const modeMenu = document.getElementById('modeMenu');

      function closeAll(){
        comunidadItem && comunidadItem.classList.remove('open');
        modeItem && modeItem.classList.remove('open');
      }

      // Comunidad toggle (click en m√≥vil)
      if(comunidadItem){
        const btn = comunidadItem.querySelector('.nav-trigger');
        btn.addEventListener('click', (e)=>{
          e.preventDefault();
          e.stopPropagation();
          const open = comunidadItem.classList.contains('open');
          closeAll();
          if(!open) comunidadItem.classList.add('open');
        });
      }

      // Modo toggle
      if(modeItem && modeMenu){
        const btn = document.getElementById('modeToggle');
        btn.addEventListener('click', (e)=>{
          e.preventDefault();
          e.stopPropagation();
          const open = modeItem.classList.contains('open');
          closeAll();
          if(!open) modeItem.classList.add('open');
        });

        modeMenu.querySelectorAll('[data-theme]').forEach(opt=>{
          opt.addEventListener('click', ()=>{
            const t = opt.dataset.theme;
            if(t === 'default'){
              document.body.removeAttribute('data-theme');
              localStorage.removeItem('gp.theme');
            }else{
              document.body.setAttribute('data-theme', t);
              localStorage.setItem('gp.theme', t);
            }
            closeAll();
          });
        });
      }

      // Cerrar al hacer click fuera
      document.addEventListener('click', (e)=>{
        if(!e.target.closest('.nav-item')) closeAll();
      });
    })();

    // ===== Reveal on scroll =====
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          e.target.classList.add('in');
          io.unobserve(e.target);
        }
      });
    }, {threshold:.2});
    document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

    // ===== Utils =====
    function escapeHtml(s){
      return String(s).replace(/[&<>"]/g, m=>({
        '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'
      }[m]));
    }
    const HOMEPAGE_LIMIT = 6;

    function candidateUrls(filename){
      const ts = Date.now();
      const origin = location.origin;
      const path = location.pathname;
      const dir = path.replace(/[^\/]*$/,'');
      const segs = path.split('/').filter(Boolean);
      const repoBase = segs.length ? `/${segs[0]}/` : '/';
      return [
        `${origin}${dir}${filename}?v=${ts}`,
        `${origin}${repoBase}${filename}?v=${ts}`,
        `${origin}/${filename}?v=${ts}`
      ].filter((v,i,a)=>a.indexOf(v)===i);
    }

    async function fetchJsonSmart(filename){
      const tries = candidateUrls(filename);
      const status = document.getElementById('status');
      for(const url of tries){
        try{
          const r = await fetch(url,{cache:'no-store'});
          if(r.ok) return await r.json();
        }catch(e){}
      }
      if(status){
        status.textContent = (location.protocol==='file:'
          ? 'Abre con Live Server (fetch se bloquea con file://).'
          : 'No se encontr√≥ posts.json. Col√≥calo junto a index.html en GitHub Pages.');
      }
      throw new Error('posts.json no encontrado');
    }

    async function loadPosts(){
      let posts = [];
      try{
        const data = await fetchJsonSmart('posts.json');
        posts = Array.isArray(data) ? data : (Array.isArray(data.entries)? data.entries:[]);
      }catch(_){}
      if(!posts.length){
        try{
          posts = JSON.parse(document.getElementById('posts-fallback').textContent || '[]');
        }catch{}
      }
      renderPosts(posts.slice(0,HOMEPAGE_LIMIT));
    }

    function renderPosts(items){
      const grid = document.getElementById('postsGrid');
      grid.innerHTML='';
      if(!items.length){
        grid.innerHTML='<p class="muted">A√∫n no hay art√≠culos.</p>';
        return;
      }
      items.forEach(p=>{
        const card=document.createElement('article');
        card.className='card reveal';
        card.style.overflow='hidden';
        const coverStyle = p.cover
          ? `style="background-image:url('${p.cover}');background-size:cover;background-position:center"`
          : '';
        card.innerHTML = `
          <div class="post-cover" ${coverStyle}></div>
          <div style="padding:16px">
            <div style="font-size:12px;color:var(--brand)">${escapeHtml(p.tag||'')}</div>
            <h3 style="margin:.2rem 0;font-size:1rem">${escapeHtml(p.title||'')}</h3>
            <p style="color:#475569">${escapeHtml(p.excerpt||'')}</p>
            <div style="padding-top:6px">
              <a class="chip" href="${p.url||'#'}">Leer ‚Üí</a>
            </div>
          </div>`;
        grid.appendChild(card);
        io.observe(card);
      });
    }

    // Donar: copiar CLABE
    document.getElementById('copyClabe').addEventListener('click', async ()=>{
      const t=document.getElementById('clabeText').textContent.trim();
      try{
        await navigator.clipboard.writeText(t);
        alert('CLABE copiada');
      }catch{
        alert('Copia la CLABE manualmente');
      }
    });
    document.getElementById('paypalBtn').href="#"; // pon aqu√≠ tu enlace real

    loadPosts();
  </script>
</body>
</html>
